#pragma once
#include <SFML/Graphics.hpp>
#include "IColisionable.h"
#include "Bloque.h"
#include "Item.h"


class Mapa : public sf::Drawable, public sf::Transformable
{
    public:
        /// Constructor
	    Mapa(int sprClase, int tilewidth, int tileheight, int mapwidth, int mapheight); 
        /// Destructor
        ~Mapa();
	    /// Gets
        sf::Vector2f         getPlayerSpawn() const;
        sf::Vector2f         getEnemigoSpawn(int i) const;
        int                  getTileWidth() const;
        int                  getTilHeight() const;
        std::vector<Bloque*> getBloques() const;
        Item                 getItem() ;
        /// Métodos
        void    spawnItem();
        void    spawnItem(sf::Vector2f pos);
        void    update();
        void    desaparecerItem();
        bool    getItemVisible();
        void	draw(sf::RenderTarget& target, sf::RenderStates states) const override; /// Polimorfismo del método draw en Drawable.
    private:
        void    generarMapa();
        void    nuevoItem(int tipoItem);

	    sf::Texture*	_txtMapa; ///textura del mapa
	    int				_tilewidth; ///Ancho del tile del mapa
	    int				_tileheight; ///Alto del tile del mapa
	    int				_sprActual; /// Nro de sprite actual
	    int				_mapWidth; // Ancho del mapa en tiles
	    int				_mapHeight; // Alto del mapa en tiles
        Item*           _item; // Item que puede aparecer, ya bien sea vida o puntos.
        sf::Vector2f    _spawnPlayer; /// posición donde aparece el personaje.
        sf::Vector2f    _spawnEnemigo[3]; /// posiciones de spawn de enemigos.
	    std::vector     <Bloque*> _bloques;/// Vector de bloques 
        int				_vMapa[40 * 50] = { 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61,
                                            61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61,
                                            61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61,
                                            61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61,
                                            61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61,
                                            34, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 36,
                                            50, 146, 145, 146, 145, 146, 145, 131, 132, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 129, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 130, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 147, 148, 130, 129, 130, 129, 130, 129, 131, 132, 131, 132, 129, 130, 146, 146, 146, 146, 131, 132, 146, 146, 146, 146, 146, 146, 146, 146, 146, 146, 146, 133, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 131, 147, 148, 147, 148, 129, 130, 130, 145, 146, 145, 147, 148, 131, 132, 146, 145, 146, 145, 146, 129, 145, 145, 146, 146, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 147, 148, 129, 130, 129, 130, 146, 130, 129, 129, 129, 130, 129, 147, 148, 130, 129, 130, 129, 129, 145, 145, 146, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 130, 129, 130, 129, 171, 172, 129, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 129, 130, 129, 129, 129, 129, 145, 145, 145, 145, 145, 129, 129, 145, 145, 145, 130, 129, 129, 146, 147, 148, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 187, 188, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 145, 129, 130, 145, 145, 145, 129, 129, 129, 130, 146, 145, 145, 145, 146, 145, 129, 145, 145, 129, 130, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 130, 130, 130, 130, 130, 130, 130, 129, 129, 129, 129, 145, 145, 129, 129, 130, 129, 130, 129, 130, 129, 129, 129, 145, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 129, 129, 129, 129, 34, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 36, 145, 129, 129, 129, 129, 129, 145, 145, 145, 145, 129, 130, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 131, 132, 129, 130, 129, 130, 129, 130, 145, 145, 145, 129, 98, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 100, 129, 145, 145, 145, 145, 145, 145, 146, 129, 129, 130, 146, 129, 130, 131, 132, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 147, 148, 145, 146, 145, 146, 145, 146, 145, 146, 145, 145, 114, 115, 115, 115, 115, 115, 115, 115, 115, 115, 115, 116, 129, 129, 130, 146, 145, 146, 145, 146, 145, 129, 130, 146, 145, 146, 147, 148, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 131, 132, 131, 132, 130, 129, 130, 129, 130, 129, 129, 129, 129, 129, 145, 145, 145, 129, 145, 129, 130, 129, 130, 130, 130, 129, 130, 129, 130, 129, 130, 130, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 147, 148, 147, 148, 146, 145, 146, 145, 146, 145, 145, 145, 145, 145, 145, 146, 146, 129, 145, 129, 129, 129, 130, 146, 146, 145, 146, 145, 146, 129, 130, 146, 146, 145, 146, 133, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 131, 132, 129, 130, 129, 129, 130, 130, 129, 145, 146, 130, 129, 130, 129, 130, 130, 130, 130, 129, 130, 130, 146, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 147, 148, 145, 146, 145, 129, 130, 146, 145, 145, 146, 146, 145, 145, 146, 145, 145, 145, 145, 145, 145, 146, 145, 146, 145, 146, 145, 146, 129, 130, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 129, 130, 130, 129, 145, 146, 130, 129, 130, 130, 129, 145, 146, 130, 129, 130, 129, 129, 130, 129, 130, 129, 129, 130, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 129, 145, 129, 145, 146, 145, 145, 145, 145, 130, 146, 145, 145, 146, 146, 145, 146, 129, 145, 146, 145, 146, 145, 129, 130, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 131, 132, 129, 130, 129, 130, 129, 130, 145, 145, 129, 130, 130, 129, 145, 146, 130, 129, 145, 146, 145, 145, 145, 145, 145, 145, 146, 130, 129, 130, 129, 129, 129, 130, 129, 130, 129, 130, 131, 132, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 147, 148, 145, 146, 145, 146, 145, 146, 145, 145, 129, 130, 146, 145, 145, 146, 146, 145, 130, 130, 129, 145, 146, 130, 129, 130, 129, 146, 145, 146, 145, 145, 129, 129, 130, 146, 145, 146, 147, 148, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 145, 145, 145, 146, 130, 129, 130, 129, 145, 130, 146, 145, 145, 146, 146, 145, 146, 129, 130, 129, 129, 130, 130, 145, 129, 130, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 129, 145, 146, 130, 130, 130, 130, 130, 130, 130, 130, 130, 129, 130, 130, 146, 130, 130, 130, 130, 130, 130, 130, 130, 130, 146, 130, 129, 129, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 145, 145, 146, 146, 146, 146, 146, 146, 146, 146, 146, 146, 130, 130, 146, 146, 146, 146, 146, 146, 146, 146, 146, 146, 130, 129, 129, 145, 145, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 131, 132, 146, 145, 145, 146, 146, 145, 146, 145, 146, 145, 146, 145, 145, 146, 146, 146, 146, 145, 146, 145, 146, 145, 146, 145, 145, 146, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 147, 148, 130, 129, 145, 146, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 131, 132, 146, 145, 145, 146, 146, 145, 146, 145, 146, 145, 146, 145, 146, 34, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 36, 132, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 147, 148, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 98, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 100, 148, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 131, 132, 145, 146, 145, 146, 114, 115, 115, 115, 115, 115, 115, 115, 115, 115, 115, 116, 145, 146, 145, 146, 131, 132, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 147, 148, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 147, 148, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 129, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 131, 132, 129, 130, 129, 130, 129, 130, 133, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 147, 148, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            50, 146, 145, 146, 145, 146, 145, 131, 132, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 129, 129, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 146, 145, 100,
                                            50, 130, 129, 130, 129, 130, 129, 147, 148, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 167, 168, 129, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 130, 129, 100,
                                            114, 114, 114, 114, 114, 110, 114, 114, 114, 114, 114, 114, 114, 114, 114, 114, 114, 114, 114, 114, 114, 181, 182, 183, 184, 185, 186, 114, 114, 114, 114, 114, 114, 114, 114, 114, 114, 110, 114, 114, 114, 114, 110, 114, 114, 114, 114, 114, 114, 114 };
};
        
        
  